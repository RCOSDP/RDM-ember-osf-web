<BsModal
    data-test-registration-report-modal
    local-class='Modal'
    @open={{this.dialogOpen}}
    @onSubmit={{action this.submit}}
    @onHidden={{action this.hideDialog}}
    as |modal|
>
    <modal.body data-analytics-scope='RegistrationReport modal'>
        <div>
            <h4 local-class='Modal__title'>{{ t 'metadata.registration-card.export-dialog.title' }}</h4>
        </div>
        <div local-class='Export__description'>
            {{t 'metadata.registration-card.export-dialog.description'}}
        </div>
        <div class='form-group'>
            <select id='registration-report-format-selection'>
                {{#each this.metadataFormats as |format|}}
                    <option
                        value='{{format.id}}'>
                        {{format.name}}
                    </option>
                {{/each}}
                {{#each this.metadataDestinations as |destination|}}
                    <option
                        value='{{destination.id}}'>
                        {{destination.name}}
                    </option>
                {{/each}}
            </select>
        </div>
    </modal.body>
    <modal.footer data-analytics-scope='RegistrationReport modal footer'>
        <OsfButton
            data-test-registration-report-cancel
            data-analytics-name='Cancel'
            @onClick={{action modal.close}}
        >
            {{t 'general.cancel'}}
        </OsfButton>
        <OsfButton
            data-test-registration-report-submit
            data-analytics-name='Submit'
            @disabled={{this.isUploading}}
            @type='success'
            @onClick={{action modal.submit}}
        >
            {{#if this.isUploading}}
                {{t 'metadata.registration-card.exporting'}}
            {{else}}
                {{t 'metadata.registration-card.export'}}
            {{/if}}
        </OsfButton>
    </modal.footer>
</BsModal>

<OsfButton
    data-test-registration-card-export
    data-analytics-name='Export'
    @type='success'
    @disabled={{and this.hasNoFormats this.hasNoDestinations}}
    @onClick={{action this.export}}
>
    {{t 'metadata.registration-card.export'}}
</OsfButton>
